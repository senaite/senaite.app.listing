(()=>{"use strict";var e={609:e=>{e.exports=jQuery}},t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{const e=React;var t=n.n(e);const r=ReactDOM;var o=n.n(r);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(_,e);var n,r,o,i,p=(o=_,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=f(o);if(i){var n=f(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return l(this,e)});function _(){return a(this,_),p.apply(this,arguments)}return n=_,(r=[{key:"render",value:function(){return t().createElement("button",s({id:this.props.id,title:this.props.help||this.props.title,name:this.props.name,url:this.props.url,onClick:this.props.onClick,className:this.props.className},this.props.attrs),t().createElement("span",{dangerouslySetInnerHTML:{__html:this.props.title}}),this.props.badge&&t().createElement("span",{className:"badge badge-light",style:{marginLeft:"0.25em"}},this.props.badge))}}])&&c(n.prototype,r),_}(t().Component);var h=n(609);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=[].indexOf;const w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=v(o);if(i){var n=v(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return b(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_ajax_save_button_click=t.on_ajax_save_button_click.bind(g(t)),t.on_transition_button_click=t.on_transition_button_click.bind(g(t)),t.confirm_transitions=["cancel","deactivate","invalidate","reject","remove","retract","unassign","retest"],t.css_mapping={reassign:"btn-secondary",duplicate:"btn-secondary",close:"btn-secondary",assign:"btn-secondary",receive:"btn-primary",open:"btn-primary",verify:"btn-primary",retest:"btn-primary",activate:"btn-success",prepublish:"btn-success",publish:"btn-success",republish:"btn-success",submit:"btn-success",unassign:"btn-warning",cancel:"btn-danger",deactivate:"btn-danger",invalidate:"btn-danger",reject:"btn-danger",retract:"btn-danger",remove:"btn-danger"},t}return n=a,(r=[{key:"componentDidUpdate",value:function(){return h("[data-toggle=confirmation]").confirmation({rootSelector:"[data-toggle=confirmation]",btnOkLabel:_t("Yes"),btnOkClass:"btn btn-outline-primary",btnOkIconClass:"fas fa-check-circle mr-1",btnCancelLabel:_t("No"),btnCancelClass:"btn btn-outline-secondary",btnCancelIconClass:"fas fa-circle mr-1",container:"body",singleton:!0})}},{key:"get_button_css",value:function(e){var t;return"btn btn-sm mr-1 mb-1"+((t=this.css_mapping[e])?" ".concat(t):" btn-outline-secondary")}},{key:"on_ajax_save_button_click",value:function(e){if(e.preventDefault(),this.props.on_ajax_save_button_click)return this.props.on_ajax_save_button_click()}},{key:"on_transition_button_click",value:function(e){var t,n,r;if(e.preventDefault(),t=(n=e.currentTarget).getAttribute("id"),r=n.getAttribute("url"),this.props.on_transition_button_click)return this.props.on_transition_button_click(t,r)}},{key:"build_buttons",value:function(){var e,n,r,o,i,s,a,c,u,l,f,_,h;for(r=[],this.props.show_select_column&&this.props.transitions.length>0&&r.push(t().createElement("button",{key:"clear",className:"btn btn-outline-secondary btn-sm mb-1 mr-1",title:_t("Clear selection"),onClick:this.on_transition_button_click,id:"clear_selection"},t().createElement("i",{className:"fas fa-circle-notch"}))),this.props.show_ajax_save&&r.push(t().createElement("button",{key:"ajax-save",className:"btn btn-primary btn-sm mb-1 mr-1",onClick:this.on_ajax_save_button_click,title:this.props.ajax_save_button_title,id:"ajax_save_selection"},this.props.ajax_save_button_title," ",t().createElement("i",{className:"fas fa-save"}))),s=0,c=(u=this.props.transitions).length;s<c;s++)a=(_=u[s]).id,h=_.url,f=_t(_.title),i=_t(_.help),o=this.get_button_css(a),n="".concat(a,"_transition"),_.css_class&&(o+=" ".concat(_.css_class)),l=this.props.review_state.confirm_transitions||[],e={},(k.call(this.confirm_transitions,a)>=0||k.call(l,a)>=0)&&(e["data-toggle"]="confirmation",e["data-title"]="".concat(f,"?")),r.push(t().createElement(p,{key:_.id,id:n,title:f,help:i,url:h,className:o,badge:this.props.selected_uids.length,onClick:this.on_transition_button_click,attrs:e}));return r}},{key:"render",value:function(){return 0===this.props.selected_uids.length?null:t().createElement("div",{className:"".concat(this.props.className)},this.build_buttons())}}])&&y(n.prototype,r),a}(t().Component);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=R(o);if(i){var n=R(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return x(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_filter_button_clicked=t.on_filter_button_clicked.bind(j(t)),t}return n=a,(r=[{key:"on_filter_button_clicked",value:function(e){var t;return e.preventDefault(),t=e.currentTarget.id,this.props.on_filter_button_clicked(t)}},{key:"build_filter_buttons",value:function(){var e,n,r,o,i,s;for(o in n=[],e=this.props.review_state,i=this.props.review_states)r="nav-item btn btn-sm btn-outline-secondary mr-1 mb-1",(s=i[o]).id===e&&(r+=" active"),n.push(t().createElement(p,{key:s.id,onClick:this.on_filter_button_clicked,id:s.id,title:s.title,className:r}));return 1===n.length?[]:n}},{key:"render",value:function(){return t().createElement("div",{className:this.props.className},this.build_filter_buttons())}}])&&E(n.prototype,r),a}(t().Component);function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}const C=function(){function e(t){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api_url=t.api_url,this.form_id=t.form_id||"list",this.on_api_error=t.on_api_error||function(e){},this}var t,n;return t=e,(n=[{key:"get_api_url",value:function(e){return"".concat(this.api_url,"/").concat(e).concat(location.search)}},{key:"to_form_name",value:function(e){return e.startsWith(this.form_id)?e:"".concat(this.form_id,"_").concat(e)}},{key:"get_url_parameter",value:function(e){var t,n;return e=(e=this.to_form_name(e)).replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),null===(n=(t=new RegExp("[\\?&]"+e+"=([^&#]*)")).exec(location.search)||t.exec(location.hash))?"":decodeURIComponent(n[1].replace(/\+/g," "))}},{key:"parse_hash",value:function(e){var t;return-1===(t=e.indexOf("#"))?[]:e.substring(t).replace("#","").replace("?","").split("&")}},{key:"get_json",value:function(e,t){var n,r,o,i,s,a;return null==t&&(t={}),o=t.method||"POST",n=JSON.stringify(t.data)||"{}",i=this.on_api_error,a=this.get_api_url(e),r={method:o,headers:{"Content-Type":"application/json","X-CSRF-TOKEN":this.get_csrf_token()},body:"POST"===o?n:null,credentials:"include"},s=new Request(a,r),fetch(s).then((function(e){return e.ok?e:Promise.reject(e)})).then((function(e){return e.json()})).catch((function(e){return i(e),e}))}},{key:"set_fields",value:function(e){var t;return t={data:e||{},method:"POST"},this.get_json("set_fields",t)}},{key:"query_folderitems",value:function(e){var t;return t={data:e||{},method:"POST"},this.get_json("query_folderitems",t)}},{key:"fetch_children",value:function(e){var t;return t={data:e||{},method:"POST"},this.get_json("get_children",t)}},{key:"fetch_folderitems",value:function(e){var t;return t={data:e||{},method:"POST"},this.get_json("folderitems",t)}},{key:"fetch_transitions",value:function(e){var t;return t={data:e||{},method:"POST"},this.get_json("transitions",t)}},{key:"get_csrf_token",value:function(){return document.querySelector("#protect-script").dataset.token}}])&&N(t.prototype,n),e}();function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function A(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=z(o);if(i){var n=z(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return A(this,e)});function a(){return D(this,a),s.apply(this,arguments)}return n=a,(r=[{key:"render",value:function(){return this.props.loading?t().createElement("div",{className:"loader"},t().createElement("span",{className:"dot dot_1"}),t().createElement("span",{className:"dot dot_2"}),t().createElement("span",{className:"dot dot_3"}),t().createElement("span",{className:"dot dot_4"})):t().createElement("div",{className:"loader"})}}])&&I(n.prototype,r),a}(t().Component);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function U(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const J=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=F(o);if(i){var n=F(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return U(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_dismiss_message=t.on_dismiss_message.bind(B(t)),t}return n=a,(r=[{key:"on_dismiss_message",value:function(e){var t;if(e.preventDefault(),t=e.currentTarget.getAttribute("index"),this.props.on_dismiss_message)return this.props.on_dismiss_message(parseInt(t))}},{key:"render_messages",value:function(){var e,n;return n=[],e=this,this.props.messages.map((function(r,o){return n.push(t().createElement("div",{key:o,className:"alert alert-".concat(r.level||"info")},t().createElement("button",{onClick:e.on_dismiss_message,index:o,type:"button",className:"close","aria-label":"Close"},t().createElement("span",{"aria-hidden":"true"},"Ã—")),r.title&&t().createElement("h4",{className:"alert-heading"},r.title),r.text&&t().createElement("div",null,r.text),r.traceback&&t().createElement("pre",null,r.traceback)))})),n}},{key:"render",value:function(){return this.props.messages?t().createElement("div",{id:this.props.id,className:this.props.className},this.render_messages()):null}}])&&V(n.prototype,r),a}(t().Component);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return($=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function K(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Y(o);if(i){var n=Y(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return K(this,e)});function a(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=s.call(this,e)).state={pagesize:n.props.pagesize},n.on_show_more_click=n.on_show_more_click.bind(W(n)),n.on_pagesize_change=n.on_pagesize_change.bind(W(n)),n.on_export_click=n.on_export_click.bind(W(n)),n.pagesize_input=t().createRef(),n.show_more_button=t().createRef(),n.export_button=t().createRef(),n}return n=a,(r=[{key:"on_show_more_click",value:function(e){var t;return e.preventDefault(),(!(t=parseInt(this.pagesize_input.current.value))||t<1)&&(t=1),this.props.onShowMore(t)}},{key:"on_pagesize_change",value:function(e){var t;if(t=this.get_pagesize_input_value(),this.setState({pagesize:t}),13===e.which)return e.preventDefault(),this.props.onShowMore(t)}},{key:"get_pagesize_input_value",value:function(){var e;return(!(e=parseInt(this.pagesize_input.current.value))||e<1)&&(e=1,this.pagesize_input.current.value=e),e}},{key:"on_export_click",value:function(e){return e.preventDefault(),this.props.onExport()}},{key:"render",value:function(){return this.props.count>=this.props.total?t().createElement("div",{id:this.props.id,className:this.props.className},!this.props.show_export&&t().createElement("div",{className:"text-right"},this.props.count," / ",this.props.total),this.props.show_export&&t().createElement("div",{className:"input-group input-group-sm float-right"},t().createElement("div",{className:"input-group-prepend"},t().createElement("span",{className:"input-group-text"},this.props.count," / ",this.props.total)),t().createElement("span",{className:"input-group-append"},t().createElement("button",{className:"btn btn-outline-secondary",ref:this.export_button,disabled:0===this.props.count,onClick:this.on_export_click},t().createElement("span",null,this.props.export_button_title||"Export"))))):t().createElement("div",{id:this.props.id,className:this.props.className},t().createElement("div",{className:"input-group input-group-sm float-right"},t().createElement("div",{className:"input-group-prepend"},t().createElement("span",{className:"input-group-text"},this.props.count," / ",this.props.total)),t().createElement("input",{type:"text",size:"3",defaultValue:this.state.pagesize,onChange:this.on_pagesize_change,onKeyPress:this.on_pagesize_change,ref:this.pagesize_input,disabled:this.props.count>=this.props.total,className:"form-control"}),t().createElement("span",{className:"input-group-append"},t().createElement("button",{className:"btn btn-outline-secondary",disabled:this.props.count>=this.props.total,ref:this.show_more_button,onClick:this.on_show_more_click},t().createElement("span",null,this.props.show_more_button_title||"Show more")),this.props.show_export&&t().createElement("button",{className:"btn btn-outline-secondary",ref:this.export_button,disabled:0===this.props.count,onClick:this.on_export_click},t().createElement("span",null,this.props.export_button_title||"Export")))))}}])&&Q(n.prototype,r),a}(t().Component);function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function te(e,t){return(te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ne(e,t){return!t||"object"!==G(t)&&"function"!=typeof t?re(e):t}function re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ie=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&te(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=oe(o);if(i){var n=oe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ne(this,e)});function a(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=s.call(this,e)).on_search_field_keypress=n.on_search_field_keypress.bind(re(n)),n.on_search_button_click=n.on_search_button_click.bind(re(n)),n.on_clear_button_click=n.on_clear_button_click.bind(re(n)),n.search_input_field=t().createRef(),n}return n=a,(r=[{key:"on_search_field_keypress",value:function(e){var t;if(13===e.which)return e.preventDefault(),t=this.get_search_value(),this.props.on_search(t)}},{key:"on_search_button_click",value:function(e){var t;return e.preventDefault(),t=this.get_search_value(),this.props.on_search(t)}},{key:"on_clear_button_click",value:function(e){return e.preventDefault(),this.search_input_field.current.value="",this.props.on_search("")}},{key:"get_search_value",value:function(){return this.search_input_field.current.value}},{key:"render",value:function(){return!1===this.props.show_search?null:t().createElement("div",{className:"input-group input-group-sm"},t().createElement("input",{type:"text",autofocus:"true",className:"form-control",ref:this.search_input_field,defaultValue:this.props.filter,onKeyPress:this.on_search_field_keypress,placeholder:this.props.placeholder}),t().createElement("span",{className:"input-group-append"},t().createElement("button",{className:"btn btn-outline-secondary",onClick:this.on_clear_button_click},t().createElement("i",{className:"fas fa-undo"})),t().createElement("button",{className:"btn btn-outline-secondary",onClick:this.on_search_button_click},t().createElement("i",{className:"fas fa-search"}))))}}])&&ee(n.prototype,r),a}(t().Component);function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(){return(ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ue(e,t){return(ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?fe(e):t}function fe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const _e=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ue(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pe(o);if(i){var n=pe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return le(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_change=t.on_change.bind(fe(t)),t}return n=a,(r=[{key:"on_change",value:function(e){var t,n,r,o;if(o=(n=e.currentTarget).getAttribute("uid"),r=n.getAttribute("column_key")||n.name,t=n.checked,this.props.update_editable_field&&this.props.update_editable_field(o,r,t,this.props.item),this.props.save_editable_field)return this.props.save_editable_field(o,r,t,this.props.item)}},{key:"render",value:function(){return t().createElement("span",{className:"form-group"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("input",ae({key:this.props.name,type:"checkbox",uid:this.props.uid,name:this.props.name,value:this.props.value,column_key:this.props.column_key,title:this.props.title,disabled:this.props.disabled,checked:this.props.checked,defaultChecked:this.props.defaultChecked,className:this.props.className,onChange:this.props.onChange||this.on_change,tabIndex:this.props.tabIndex},this.props.attrs)),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&ce(n.prototype,r),a}(t().Component);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t){return(ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function be(e){return(be=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ge=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ye(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=be(o);if(i){var n=be(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return me(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,e)}return n=a,(r=[{key:"render",value:function(){return t().createElement("th",{title:this.props.title,index:this.props.index,sort_order:this.props.sort_order,className:this.props.className,onClick:this.props.onClick},t().createElement("span",null,this.props.title))}}])&&de(n.prototype,r),a}(t().Component);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ke(){return(ke=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ee(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?Se(e):t}function Se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var je=[].indexOf;const Re=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=xe(o);if(i){var n=xe(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ee(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_header_column_click=t.on_header_column_click.bind(Se(t)),t}return n=a,(r=[{key:"on_header_column_click",value:function(e){var t,n,r;if(n=(t=e.currentTarget).getAttribute("index"),r=t.getAttribute("sort_order"),n)return je.call(t.classList,"active")>=0&&(r="ascending"===r?"descending":"ascending"),this.props.on_header_column_click(n,r)}},{key:"is_required_column",value:function(e){var t,n;return 0!==(t=this.props.folderitems||[]).length&&(n=t[0].required||[],je.call(n,e)>=0)}},{key:"is_sortable",value:function(e,t){return!1!==e.sortable&&(!!e.index||je.call(this.props.sortable_columns,t)>=0)}},{key:"all_selected",value:function(){var e,t,n,r,o;for(e=0,n=(r=this.props.folderitems).length;e<n;e++)if(!(t=r[e]).disabled&&(o=t.uid,je.call(this.props.selected_uids,o)<0))return!1;return!0}},{key:"build_cells",value:function(){var e,n,r,o,i,s,a,c,u,l,f,p,_,h,d,y;for(n=[],this.props.item,this.props.show_select_column&&(e=this.all_selected(),p=this.props.show_select_all_checkbox,n.push(t().createElement("th",{key:"select_all"},p&&t().createElement(_e,{name:"select_all",value:"all",checked:e,onChange:this.props.on_select_checkbox_checked})))),i=0,u=(l=this.props.visible_columns).length;i<u;i++)c=l[i],o=this.props.columns[c],d=this.is_sortable(o,c),s=o.index||c,y=o.title,_=this.props.sort_on||"created",h=this.props.sort_order||"ascending",a=s===_,f=this.is_required_column(c),r=[c],d&&r.push("sortable"),a&&d&&r.push("active ".concat(h)),f&&r.push("required"),r=r.join(" "),n.push(t().createElement(ge,ke({key:c},this.props,{title:y,index:s,sort_order:h,className:r,onClick:d?this.on_header_column_click:void 0})));return n}},{key:"render",value:function(){return t().createElement("tr",{onContextMenu:this.props.on_context_menu},this.build_cells())}}])&&we(n.prototype,r),a}(t().Component);function Pe(e){return(Pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(){return(Ne=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function De(e,t){return!t||"object"!==Pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const qe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ie(o);if(i){var n=Ie(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return De(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,e)}return n=a,(r=[{key:"render",value:function(){return t().createElement("span",{className:"form-group"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("input",Ne({type:"hidden",uid:this.props.uid,name:this.props.name,value:this.props.value,column_key:this.props.column_key,className:this.props.className},this.props.attrs)),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&Ce(n.prototype,r),a}(t().Component);function Ae(e){return(Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(){return(ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ve(e,t){return!t||"object"!==Ae(t)&&"function"!=typeof t?He(e):t}function He(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ue(e){return(Ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ue(o);if(i){var n=Ue(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ve(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_change=t.on_change.bind(He(t)),t}return n=a,(r=[{key:"on_change",value:function(e){var t,n,r,o,i,s,a;if(s=(n=e.currentTarget).parentNode.parentNode,t=s.querySelectorAll("input[type='checkbox']:checked"),i=n.getAttribute("uid"),o=n.getAttribute("column_key")||n.name,a=function(){var e,n,o;for(o=[],e=0,n=t.length;e<n;e++)r=t[e],o.push(r.value);return o}(),this.props.update_editable_field)return this.props.update_editable_field(i,o,a,this.props.item)}},{key:"build_options",value:function(){var e,n,r,o,i,s,a,c;for(o=[],e=0,n=(s=this.props.options.sort((function(e,t){var n,r;return(n=e.ResultText.toLowerCase())>(r=t.ResultText.toLowerCase())?1:n<r?-1:0}))).length;e<n;e++)c=(r=s[e]).ResultValue,a=r.ResultText,i=r.selected||!1,o.push(t().createElement("li",{key:c},t().createElement("input",ze({type:"checkbox",defaultChecked:i,uid:this.props.uid,name:this.props.name,value:c,onChange:this.props.onChange||this.on_change,column_key:this.props.column_key,tabIndex:this.props.tabIndex},this.props.attrs))," ",a));return o}},{key:"render",value:function(){return t().createElement("div",{className:"multichoice"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("ul",{className:"list-unstyled"},this.build_options()),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&Le(n.prototype,r),a}(t().Component);function Fe(e){return(Fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e,t){return!t||"object"!==Fe(t)&&"function"!=typeof t?Ke(e):t}function Ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function We(e){return(We=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ye=[].indexOf;const Xe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=We(o);if(i){var n=We(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return $e(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).state={value:e.defaultValue},t.on_change=t.on_change.bind(Ke(t)),t}return n=a,(r=[{key:"on_change",value:function(e){var t,n,r,o,i,s,a;if(s=(n=e.currentTarget).parentNode.parentNode,t=s.querySelectorAll("select"),i=n.getAttribute("uid"),o=n.getAttribute("column_key")||n.name,a=function(){var e,n,o;for(o=[],e=0,n=t.length;e<n;e++)r=t[e],o.push(r.value);return o}(),this.setState({value:a}),this.props.update_editable_field)return this.props.update_editable_field(i,o,a,this.props.item)}},{key:"build_options",value:function(e){var n,r,o,i,s,a,c,u;for(i=[],0===(s=(s=this.props.options||[]).filter((function(t){var n;return n=t.ResultValue,Ye.call(e,n)<0}))).filter((function(e){return""===e.ResultValue})).length&&s.push({ResultValue:"",ResultText:""}),n=0,r=(a=s.sort((function(e,t){var n,r;return(n=e.ResultText.toLowerCase())>(r=t.ResultText.toLowerCase())?1:n<r?-1:0}))).length;n<r;n++)u=(o=a[n]).ResultValue,c=o.ResultText,i.push(t().createElement("option",{value:u},c));return i}},{key:"to_array",value:function(e){return e?Array.isArray(e)?e:JSON.parse(e):[]}},{key:"build_selectors",value:function(){var e,n,r,o,i,s,a,c;for(c=(c=this.to_array(this.state.value)).filter((function(e){return""!==e})),n=[],this.props.duplicates?c.push(""):(n=c,i=this.props.options||[],c.length<i.length&&c.push("")),a=[],r=0,o=c.length;r<o;r++)s=c[r],e=n.filter((function(e){return e!==s})),a.push(t().createElement("li",{key:s},t().createElement("select",Je({value:s,uid:this.props.uid,name:this.props.name,onChange:this.props.onChange||this.on_change,column_key:this.props.column_key,className:this.props.className},this.props.attrs),this.build_options(e))));return a}},{key:"render",value:function(){return t().createElement("div",{className:"multiselect"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("ul",{className:"list-unstyled",tabIndex:this.props.tabIndex},this.build_selectors()),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&Ze(n.prototype,r),a}(t().Component);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(){return(et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function rt(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?ot(e):t}function ot(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const st=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=it(o);if(i){var n=it(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return rt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).state={value:e.defaultValue},t.on_blur=t.on_blur.bind(ot(t)),t.on_change=t.on_change.bind(ot(t)),t}return n=a,(r=[{key:"componentDidUpdate",value:function(e){if(this.props.defaultValue!==e.defaultValue)return this.setState({value:this.props.defaultValue})}},{key:"on_blur",value:function(e){var t,n,r,o;if(r=(t=e.currentTarget).getAttribute("uid"),n=t.getAttribute("column_key")||t.name,o=(o=t.value).replace(/\.*$/,""),t.value=o,this.props.save_editable_field)return this.props.save_editable_field(r,n,o,this.props.item)}},{key:"on_change",value:function(e){var t,n,r,o;if(r=(t=e.currentTarget).getAttribute("uid"),n=t.getAttribute("column_key")||t.name,o=t.value,o=this.to_float(o),t.value=o,this.setState({value:o}),this.props.update_editable_field)return this.props.update_editable_field(r,n,o,this.props.item)}},{key:"to_float",value:function(e){return(e=e.replace(/(^[-,<,>]?)(\d*)([\.,]?\d*)(.*)/,"$1$2$3")).replace(",",".")}},{key:"render",value:function(){return t().createElement("span",{className:"form-group"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("input",et({type:"text",size:this.props.size||5,uid:this.props.uid,name:this.props.name,value:this.state.value,column_key:this.props.column_key,title:this.props.title,disabled:this.props.disabled,required:this.props.required,className:this.props.className,placeholder:this.props.placeholder,onBlur:this.props.onBlur||this.on_blur,onChange:this.props.onChange||this.on_change,tabIndex:this.props.tabIndex},this.props.attrs)),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&tt(n.prototype,r),a}(t().Component);function at(e){return(at="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lt(e,t){return(lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ft(e,t){return!t||"object"!==at(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ht=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lt(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=pt(o);if(i){var n=pt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ft(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,e)}return n=a,(r=[{key:"render",value:function(){return t().createElement("span",{className:"form-group"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("input",ct({type:"text",size:this.props.size||5,uid:this.props.uid,name:this.props.name,value:this.props.value||"",column_key:this.props.column_key,title:this.props.title,disabled:!0,required:this.props.required,className:this.props.className,placeholder:this.props.placeholder,tabIndex:"-1"},this.props.attrs)),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&ut(n.prototype,r),a}(t().Component);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(){return(yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gt(e,t){return!t||"object"!==dt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vt(e){return(vt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const kt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=vt(o);if(i){var n=vt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gt(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,e)}return n=a,(r=[{key:"is_boolean_field",value:function(){return"boolean"==typeof this.props.value}},{key:"render",value:function(){return this.is_boolean_field()?this.props.value?t().createElement("span",null,_t("Yes")):t().createElement("span",null,_t("No")):t().createElement("span",{className:this.props.className},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("span",yt({dangerouslySetInnerHTML:{__html:this.props.formatted_value}},this.props.attrs)),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&mt(n.prototype,r),a}(t().Component);function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(){return(Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Et(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function St(e,t){return(St=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xt(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?jt(e):t}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rt(e){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&St(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Rt(o);if(i){var n=Rt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return xt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).state={value:e.defaultValue||""},t.on_blur=t.on_blur.bind(jt(t)),t.on_change=t.on_change.bind(jt(t)),t}return n=a,(r=[{key:"componentDidUpdate",value:function(e){if(this.props.defaultValue!==e.defaultValue)return this.setState({value:this.props.defaultValue})}},{key:"on_blur",value:function(e){var t,n,r,o;if(r=(t=e.currentTarget).getAttribute("uid"),n=t.getAttribute("column_key")||t.name,o=t.value,this.setState({value:o}),this.props.save_editable_field)return this.props.save_editable_field(r,n,o,this.props.item)}},{key:"on_change",value:function(e){var t,n,r,o;if(r=(t=e.currentTarget).getAttribute("uid"),n=t.getAttribute("column_key")||t.name,(o=t.value)!==this.state.value)return this.setState({value:o}),this.props.update_editable_field?this.props.update_editable_field(r,n,o,this.props.item):void 0}},{key:"build_options",value:function(){var e,n,r,o,i,s,a;for(o=[],e=0,n=(i=this.props.options.sort((function(e,t){var n,r;return(n=e.ResultText)>(r=t.ResultText)?1:n<r?-1:0}))).length;e<n;e++)a=(r=i[e]).ResultValue,s=r.ResultText,o.push(t().createElement("option",{key:a,value:a},s));return o}},{key:"render",value:function(){return t().createElement("span",{className:"form-group"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("select",Ot({key:this.props.name,uid:this.props.uid,name:this.props.name,value:this.state.value,column_key:this.props.column_key,title:this.props.title,disabled:this.props.disabled,onBlur:this.props.onBlur||this.on_blur,onChange:this.props.onChange||this.on_change,required:this.props.required,className:this.props.className,tabIndex:this.props.tabIndex},this.props.attrs),this.build_options()),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&Et(n.prototype,r),a}(t().Component);function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ct(){return(Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Tt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t){return(Dt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function It(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?qt(e):t}function qt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const zt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dt(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=At(o);if(i){var n=At(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return It(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).state={value:e.defaultValue},t.on_change=t.on_change.bind(qt(t)),t}return n=a,(r=[{key:"componentDidUpdate",value:function(e){if(this.props.defaultValue!==e.defaultValue)return this.setState({value:this.props.defaultValue})}},{key:"on_change",value:function(e){var t,n,r,o;if(r=(t=e.currentTarget).getAttribute("uid"),n=t.getAttribute("column_key")||t.name,o=t.value,this.setState({value:o}),this.props.update_editable_field)return this.props.update_editable_field(r,n,o,this.props.item)}},{key:"render",value:function(){return t().createElement("span",{className:"form-group"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("input",Ct({type:"text",size:this.props.size||20,uid:this.props.uid,name:this.props.name,value:this.state.value,column_key:this.props.column_key,title:this.props.title,disabled:this.props.disabled,required:this.props.required,className:this.props.className,placeholder:this.props.placeholder,onChange:this.props.onChange||this.on_change,tabIndex:this.props.tabIndex},this.props.attrs)),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&Tt(n.prototype,r),a}(t().Component);function Lt(e){return(Lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ut(e,t){return!t||"object"!==Lt(t)&&"function"!=typeof t?Bt(e):t}function Bt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ft(e){return(Ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Jt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Ft(o);if(i){var n=Ft(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Ut(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).state={value:e.defaultValue},t.on_change=t.on_change.bind(Bt(t)),t}return n=a,(r=[{key:"componentDidUpdate",value:function(e){if(this.props.defaultValue!==e.defaultValue)return this.setState({value:this.props.defaultValue})}},{key:"on_change",value:function(e){var t,n,r,o;if(r=(t=e.currentTarget).getAttribute("uid"),n=t.getAttribute("column_key")||t.name,o=t.value,this.setState({value:o}),this.props.update_editable_field)return this.props.update_editable_field(r,n,o,this.props.item)}},{key:"render",value:function(){return t().createElement("span",{className:"form-group"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("input",Mt({type:"datetime-local",size:this.props.size||20,uid:this.props.uid,name:this.props.name,value:this.state.value,column_key:this.props.column_key,title:this.props.title,disabled:this.props.disabled,required:this.props.required,className:this.props.className,placeholder:this.props.placeholder,onChange:this.props.onChange||this.on_change,tabIndex:this.props.tabIndex},this.props.attrs)),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}}))}}])&&Vt(n.prototype,r),a}(t().Component);function Zt(e){return(Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qt(){return(Qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wt(e,t){return!t||"object"!==Zt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Xt=[].indexOf;const Gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Yt(o);if(i){var n=Yt(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Wt(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).ZPUBLISHER_CONVERTER={boolean:":record:ignore_empty",select:":records",choices:":records",multiselect:":list",multichoice:":list",numeric:":records",string:":records",datetime:":records",readonly:"",default:":records"},t}return n=a,(r=[{key:"get_item",value:function(){return this.props.item}},{key:"get_column_key",value:function(){return this.props.column_key}},{key:"render_before_content",value:function(){var e,n,r,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r=this.get_column_key(),o=this.get_item())return r in(e=o.before)?(n=o.before_components||{},t().createElement("span",{key:r+"_before",className:"before-item"},n[r],t().createElement("span",Qt({dangerouslySetInnerHTML:{__html:e[r]}},i)))):null}},{key:"render_after_content",value:function(){var e,n,r,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r=this.get_column_key(),o=this.get_item())return r in(e=o.after)?(n=o.after_components||{},t().createElement("span",{key:r+"_after",className:"after-item"},n[r],t().createElement("span",Qt({dangerouslySetInnerHTML:{__html:e[r]}},i)))):null}},{key:"is_edit_allowed",value:function(){var e,t;return e=this.get_column_key(),t=this.get_item(),!!this.props.allow_edit&&Xt.call(t.allow_edit,e)>=0}},{key:"is_disabled",value:function(){var e,t;return!0===(t=this.get_item().disabled)||!1===t?t:null!=t&&(e=this.get_column_key(),Xt.call(t,e)>=0)}},{key:"is_required",value:function(){var e,t,n,r;return e=this.get_column_key(),n=this.get_item().required||[],t=Xt.call(n,e)>=0,r=this.props.selected,t&&r}},{key:"get_name",value:function(){var e,t;return t=this.get_uid(),e=this.get_column_key(),"".concat(e,".").concat(t)}},{key:"get_uid",value:function(){return this.get_item().uid}},{key:"is_selected",value:function(){var e;return e=this.get_item().uid,Xt.call(this.props.selected_uids,e)>=0}},{key:"get_value",value:function(){var e,t,n;return e=this.get_column_key(),n=this.get_item()[e],(t=this.get_interimfields()).hasOwnProperty(e)&&(n=t[e].value||""),null===n&&(n=""),n}},{key:"get_size",value:function(){var e,t,n;return n=5,(t=this.get_item()).hasOwnProperty("size")&&(n=t.size),this.is_interimfield()&&(e=t[this.get_column_key()])&&e.hasOwnProperty("size")&&(n=e.size),n}},{key:"get_formatted_unit",value:function(){var e,t,n;return e=this.get_column_key(),n=(t=this.get_item()).Unit,this.is_interimfield()&&(n=t[e].unit),n?"<span class='unit'>".concat(n,"</span>"):""}},{key:"get_interimfields",value:function(){var e,t;return e=this.get_item().interimfields||[],t={},e.map((function(e,n){return t[e.keyword]=e})),t}},{key:"is_interimfield",value:function(){var e;return e=this.get_column_key(),this.get_interimfields().hasOwnProperty(e)}},{key:"get_choices",value:function(){return this.get_item().choices||{}}},{key:"is_result_column",value:function(){return"Result"===this.get_column_key()}},{key:"get_formatted_value",value:function(){var e,t,n;return e=this.get_column_key(),t=(n=this.get_item()).replace[e]||this.get_value(),this.is_result_column()?(t=n.formatted_result||t)&&(t+=this.get_formatted_unit()):this.is_interimfield()&&t&&(t+=this.get_formatted_unit()),t}},{key:"get_type",value:function(){var e,t,n,r,o;return t=this.get_column_key(),r=this.get_item(),n=this.is_edit_allowed(),o=this.is_result_column(),n?o&&r.calculation?"calculated":"type"in(e=this.props.column||{})?e.type:"boolean"==typeof this.get_value()?"boolean":t in this.get_choices()?("select",o&&r.result_type||"select"):this.is_interimfield()?"interim":o&&r.result_type||"numeric":"readonly"}},{key:"create_readonly_field",value:function(){var e,n,r,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=s.props;return this.get_column_key(),this.get_item(),null==a&&(a={}),r=this.get_name(),i=this.get_value(),n=this.get_formatted_value(),o=this.get_uid(),e="readonly",t().createElement(kt,Qt({key:r,uid:o,name:r,value:i,formatted_value:n,className:e},a))}},{key:"create_calculated_field",value:function(){var e,n,r,o,i,s,a,c,u,l,f,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=p.props;return e=this.get_column_key(),o=this.get_item(),null==_&&(_={}),i=this.get_name(),f=this.get_value(),r=this.get_formatted_value(),l=this.get_formatted_unit(),u=this.get_uid(),c=this.props.column.title||e,a=this.is_selected(),n="form-control input-sm calculated",(s=this.is_required())&&(n+=" required"),t().createElement(ht,Qt({key:i,uid:u,item:o,name:i,value:f,column_key:e,title:c,formatted_value:r,placeholder:c,selected:a,required:s,className:n,after:l,update_editable_field:this.props.update_editable_field,save_editable_field:this.props.save_editable_field},_))}},{key:"create_hidden_field",value:function(){var e,n,r,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=i.props;return e=this.get_column_key(),this.get_item(),null==s&&(s={}),n=this.get_name(),o=this.get_value(),this.get_formatted_value(),r=this.get_uid(),this.props.column.title,t().createElement(qe,Qt({key:n+"_hidden",uid:r,name:n,value:o,column_key:e},s))}},{key:"create_numeric_field",value:function(){var e,n,r,o,i,s,a,c,u,l,f,p,_,h,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=d.props;return e=this.get_column_key(),s=this.get_item(),null==y&&(y={}),a=this.get_name(),h=this.get_value(),i=this.get_formatted_value(),_=this.get_formatted_unit(),p=this.get_uid(),o=a+this.ZPUBLISHER_CONVERTER.numeric,f=this.props.column.title||e,u=this.is_selected(),r=this.is_disabled(),c=this.is_required(),l=this.get_size(),n="form-control input-sm",c&&(n+=" required"),t().createElement(st,Qt({key:a,uid:p,item:s,name:o,defaultValue:h,column_key:e,title:f,formatted_value:i,placeholder:f,selected:u,disabled:r,required:c,className:n,after:_,update_editable_field:this.props.update_editable_field,save_editable_field:this.props.save_editable_field,tabIndex:this.props.tabIndex,size:l},y))}},{key:"create_string_field",value:function(){var e,n,r,o,i,s,a,c,u,l,f,p,_,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=h.props;return e=this.get_column_key(),s=this.get_item(),null==d&&(d={}),a=this.get_name(),_=this.get_value(),i=this.get_formatted_value(),p=this.get_formatted_unit(),f=this.get_uid(),o=a+this.ZPUBLISHER_CONVERTER.string,l=this.props.column.title||e,u=this.is_selected(),r=this.is_disabled(),n="form-control input-sm",(c=this.is_required())&&(n+=" required"),t().createElement(zt,Qt({key:a,uid:f,item:s,name:o,defaultValue:_,column_key:e,title:l,formatted_value:i,placeholder:l,selected:u,disabled:r,required:c,className:n,after:p,update_editable_field:this.props.update_editable_field,save_editable_field:this.props.save_editable_field,tabIndex:this.props.tabIndex},d))}},{key:"create_datetime_field",value:function(){var e,n,r,o,i,s,a,c,u,l,f,p,_,h,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},y=d.props;return e=this.get_column_key(),s=this.get_item(),null==y&&(y={}),a=this.get_name(),h=this.get_value(),i=this.get_formatted_value(),_=this.get_formatted_unit(),p=this.get_uid(),o=a+this.ZPUBLISHER_CONVERTER.string,f=this.props.column.title||e,l=this.is_selected(),r=this.is_disabled(),n="form-control input-sm",(c=this.is_required())&&(n+=" required"),u="date",t().createElement(Jt,Qt({key:a,uid:p,item:s,name:o,defaultValue:h,column_key:e,title:f,formatted_value:i,placeholder:f,selected:l,disabled:r,required:c,className:n,results_type:u,after:_,update_editable_field:this.props.update_editable_field,save_editable_field:this.props.save_editable_field,tabIndex:this.props.tabIndex},y))}},{key:"create_select_field",value:function(){var e,n,r,o,i,s,a,c,u,l,f,p,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=_.props;return e=this.get_column_key(),i=this.get_item(),null==h&&(h={}),s=this.get_name(),p=this.get_value(),a=i.choices[e]||[],this.get_formatted_value(),f=this.get_uid(),o=s+this.ZPUBLISHER_CONVERTER.select,l=this.props.column.title||e,u=this.is_selected(),r=this.is_disabled(),n="form-control input-sm",(c=this.is_required())&&(n+=" required"),t().createElement(Pt,Qt({key:s,uid:f,item:i,name:o,defaultValue:p,column_key:e,title:l,disabled:r,selected:u,required:c,options:a,className:n,update_editable_field:this.props.update_editable_field,save_editable_field:this.props.save_editable_field,tabIndex:this.props.tabIndex},h))}},{key:"create_multichoice_field",value:function(){var e,n,r,o,i,s,a,c,u,l,f,p,_=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},h=_.props;return e=this.get_column_key(),i=this.get_item(),null==h&&(h={}),s=this.get_name(),(p=this.get_value()).length>0&&(p=JSON.parse(p)),(a=i.choices[e]||[]).forEach((function(e){var t;return t=!1,Array.isArray(p)&&(t=p.indexOf(e.ResultValue)>-1),e.selected=t})),this.get_formatted_value(),f=this.get_uid(),o=s+this.ZPUBLISHER_CONVERTER.multichoice,l=this.props.column.title||e,u=this.is_selected(),r=this.is_disabled(),n="form-control input-sm",(c=this.is_required())&&(n+=" required"),t().createElement(Be,Qt({key:s,uid:f,item:i,name:o,column_key:e,title:l,disabled:r,selected:u,required:c,options:a,className:n,update_editable_field:this.props.update_editable_field,save_editable_field:this.props.save_editable_field,tabIndex:this.props.tabIndex},h))}},{key:"create_multiselect_field",value:function(){var e,n,r,o,i,s,a,c,u,l,f,p,_,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=h.props;return e=this.get_column_key(),s=this.get_item(),null==d&&(d={}),p=this.get_uid(),a=this.get_name(),_=this.get_value(),c=s.choices[e]||[],this.get_formatted_value(),i=a+this.ZPUBLISHER_CONVERTER.multiselect,f=this.props.column.title||e,l=this.is_selected(),r=this.is_disabled(),u=this.is_required(),o="multiselect_duplicates"===s.result_type,n="form-control input-sm",u&&(n+=" required"),t().createElement(Xe,Qt({key:a,uid:p,item:s,name:i,defaultValue:_,value:_,column_key:e,title:f,disabled:r,selected:l,required:u,options:c,duplicates:o,className:n,update_editable_field:this.props.update_editable_field,save_editable_field:this.props.save_editable_field,tabIndex:this.props.tabIndex},d))}},{key:"create_checkbox_field",value:function(){var e,n,r,o,i,s,a,c,u,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},f=l.props;return e=this.get_column_key(),i=this.get_item(),null==f&&(f={}),s=this.get_name(),u=this.get_value(),i.choices[e],this.get_formatted_value(),c=this.get_uid(),o=s+this.ZPUBLISHER_CONVERTER.boolean,a=this.props.column.title||e,this.is_selected(),r=this.is_disabled(),n="checkbox",this.is_required()&&(n+=" required"),t().createElement(_e,Qt({key:s,uid:c,item:i,name:o,value:"on",column_key:e,title:a,defaultChecked:u,disabled:r,className:n,update_editable_field:this.props.update_editable_field,save_editable_field:this.props.save_editable_field,tabIndex:this.props.tabIndex},f))}},{key:"render_content",value:function(){var e,t;return this.get_column_key(),this.get_item()?(this.get_uid(),e=[],"readonly"===(t=this.get_type())?e=e.concat(this.create_readonly_field()):"calculated"===t?e=e.concat(this.create_calculated_field()):"interim"===t?e=e.concat(this.create_numeric_field()):"select"===t||"choices"===t?e=e.concat(this.create_select_field()):"multichoice"===t?e=e.concat(this.create_multichoice_field()):"multiselect"===t||"multiselect_duplicates"===t?e=e.concat(this.create_multiselect_field()):"boolean"===t?e=e.concat(this.create_checkbox_field()):"numeric"===t?e=e.concat(this.create_numeric_field()):"string"===t?e=e.concat(this.create_string_field()):"datetime"===t&&(e=e.concat(this.create_datetime_field())),e):null}},{key:"render",value:function(){return t().createElement("td",{className:this.props.className,colSpan:this.props.colspan,rowSpan:this.props.rowspan},t().createElement("div",{className:"form-group"},this.render_before_content(),this.render_content(),this.render_after_content()))}}])&&$t(n.prototype,r),a}(t().Component);function en(e){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tn(){return(tn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rn(e,t){return(rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function on(e,t){return!t||"object"!==en(t)&&"function"!=typeof t?sn(e):t}function sn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function an(e){return(an=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cn=[].indexOf;const un=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rn(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=an(o);if(i){var n=an(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return on(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_blur=t.on_blur.bind(sn(t)),t.on_change=t.on_change.bind(sn(t)),t}return n=a,(r=[{key:"on_blur",value:function(e){var t,n,r,o;if(r=(t=e.currentTarget).getAttribute("uid"),n=t.getAttribute("column_key")||t.name,o=t.value,this.props.save_editable_field)return this.props.save_editable_field(r,n,o,this.props.item)}},{key:"on_change",value:function(e){var t,n,r,o;if(r=(t=e.currentTarget).getAttribute("uid"),n=t.getAttribute("column_key")||t.name,o=t.value,this.props.update_editable_field)return this.props.update_editable_field(r,n,o,this.props.item)}},{key:"can_edit",value:function(){var e,t,n;return n=this.props.item,t=this.props.column_key,e=n.allow_edit||[],cn.call(e,t)>=0}},{key:"get_column_title",value:function(){var e;return e=this.props.columns[this.props.column_key].title||"Remarks","function"==typeof _&&(e=_(e)),e}},{key:"get_style",value:function(){var e;return e=this.props.uid,{display:cn.call(this.props.expanded_remarks,e)>=0||this.props.value.length>0?"block":"none"}}},{key:"render_remarks_field",value:function(){var e,n,r,o;return r=this.props.uid,e=this.props.column_key,n="".concat(e,".").concat(r,":records"),o=this.props.value,this.can_edit()?t().createElement("textarea",tn({className:"remarksfield form-control",uid:r,column_key:e,style:{width:"100%"},rows:this.props.rows||2,name:n,onBlur:this.props.onBlur||this.on_blur,onChange:this.props.onChange||this.on_change,defaultValue:o,tabIndex:this.props.tabIndex},this.props.attrs)):t().createElement("span",{className:"remarksfield",dangerouslySetInnerHTML:{__html:o}})}},{key:"render",value:function(){return this.props.uid?t().createElement("div",{style:this.get_style(),className:"remarks text-muted"},this.props.before&&t().createElement("span",{className:"before_field",dangerouslySetInnerHTML:{__html:this.props.before}}),t().createElement("div",{className:"text-info"},t().createElement("i",{className:"fas fa-hand-point-right"})," ",this.get_column_title(),":"),this.render_remarks_field(),this.props.after&&t().createElement("span",{className:"after_field",dangerouslySetInnerHTML:{__html:this.props.after}})):null}}])&&nn(n.prototype,r),a}(t().Component);function ln(e){return(ln="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fn(){return(fn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dn(e,t){return!t||"object"!==ln(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yn(e){return(yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mn=[].indexOf;const bn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=yn(o);if(i){var n=yn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return dn(this,e)});function a(){return pn(this,a),s.apply(this,arguments)}return n=a,(r=[{key:"get_item",value:function(){return this.props.item[this.props.column_key]}},{key:"get_column_key",value:function(){return this.props.item.item_key||this.props.item.column_key}},{key:"get_css",value:function(){var e,t,n;return t=this.get_item(),e=["transposed",this.props.className],this.is_result_column()&&e.push("result"),t?(e.push(t.state_class),n=t.uid,mn.call(this.props.selected_uids,n)>=0&&e.push("info")):e.push("empty"),e.join(" ")}},{key:"get_remarks_columns",value:function(){var e,t,n;for(t in e=[],n=this.props.columns)"remarks"===n[t].type&&e.push(t);return e}},{key:"create_select_checkbox",value:function(){var e,n,r,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=i.props;return null==s&&(s={}),o=this.get_uid(),n="".concat(this.props.select_checkbox_name,":list"),e=this.is_disabled(),r=this.is_selected(),t().createElement("div",{key:"select",className:"checkbox"},t().createElement(_e,fn({name:n,value:o,disabled:e,checked:r,onChange:this.props.on_select_checkbox_checked},s)))}},{key:"create_interim_fields",value:function(){var e,t,n,r,o,i,s,a,c,u,l,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},p=f.props;for(null==p&&(p={}),u=this.get_uid(),e=[],n=t=0,s=(o=this.get_item().interimfields||[]).length;t<s;n=++t)i=(r=o[n]).keyword,this.props.columns.hasOwnProperty(i)&&(l=r.unit||"",c=r.title||i,a=r.size||5,p={key:i,column_key:i,name:"".concat(i,".").concat(u),defaultValue:r.value,placeholder:c,formatted_value:r.formatted_value,size:a,before:"<span>".concat(c,"</span>"),after:"<span>".concat(l,"</span>")},this.is_edit_allowed()?(p.className="form-control input-sm interim",e=e.concat(this.create_numeric_field({props:p}))):(p.className="readonly interim",e=e.concat(this.create_readonly_field({props:p}))));return e}},{key:"render_content",value:function(){var e,n,r,o,i,s,a,c,u,l,f;if(r=this.get_column_key(),!(s=this.get_item()))return null;if(f=this.get_uid(),l=this.get_type(),o=[],this.is_result_column){u=this.props.columns.Result.title,(e={})[r]=[this.create_select_checkbox()],this.get_remarks_columns().length>0&&e[r].push(t().createElement("a",{key:f+"_remarks",href:"#",className:"transposed_remarks",uid:f,onClick:this.props.on_remarks_expand_click},t().createElement("i",{className:"remarksicon fas fa-comment"}))),s.before_components=e,"readonly"===l?o=(o=o.concat(this.create_interim_fields())).concat(this.create_readonly_field()):(o=o.concat(this.create_interim_fields()),o="calculated"===l?o.concat(this.create_calculated_field({props:{before:"<span>".concat(u,"</span>"),after:"<span>".concat(s.Unit||"","</span>")}})):r in this.get_choices()?o.concat(this.create_select_field()):o.concat(this.create_numeric_field()));for(n=i=0,a=(c=this.get_remarks_columns()).length;i<a;n=++i)s[r=c[n]],o.push(t().createElement("div",{key:n+"_remarks"},t().createElement(un,fn({},this.props,{uid:f,item:s,column_key:r,value:s[r]}))));return s.replace.Attachments&&(o=o.concat(this.create_readonly_field({props:{key:n+"_attachments",uid:f,item:s,column_key:"Attachments",formatted_value:s.replace.Attachments,attrs:{style:{display:"block"}}}}))),o}}},{key:"render",value:function(){return t().createElement("td",{className:this.get_css(),colSpan:this.props.colspan,rowSpan:this.props.rowspan},t().createElement("div",{className:"form-group"},this.render_before_content(),this.render_content(),this.render_after_content()))}}])&&_n(n.prototype,r),a}(Gt);function gn(e){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vn(){return(vn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e,t){return(wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function On(e,t){return!t||"object"!==gn(t)&&"function"!=typeof t?En(e):t}function En(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var xn=[].indexOf;const jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wn(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Sn(o);if(i){var n=Sn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return On(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_remarks_expand_click=t.on_remarks_expand_click.bind(En(t)),t}return n=a,(r=[{key:"on_remarks_expand_click",value:function(e){var t;if(e.preventDefault(),t=e.currentTarget.getAttribute("uid"),this.props.on_remarks_expand_click)return this.props.on_remarks_expand_click(t)}},{key:"get_column",value:function(e){return this.props.columns[e]}},{key:"get_item",value:function(){return this.props.item}},{key:"get_uid",value:function(){return this.get_item().uid}},{key:"get_tab_index",value:function(e,t){return"disabled"===(t.tabindex||{column_key:"active"})[e]?-1:0}},{key:"get_colspan",value:function(e,t){return(t.colspan||{})[e]}},{key:"get_rowspan",value:function(e,t){return(t.rowspan||{})[e]}},{key:"skip_cell_rendering",value:function(e){var t;return t=this.get_item().skip||[],xn.call(t,e)>=0}},{key:"show_select",value:function(){var e;return"boolean"==typeof(e=this.get_item()).show_select?e.show_select:this.props.show_select_column}},{key:"is_transposed",value:function(e){return"transposed"===this.get_column(e).type}},{key:"create_select_cell",value:function(){var e,n,r,o,i;return e="".concat(this.props.select_checkbox_name,":list"),n=this.get_item(),i=this.get_uid(),o=this.props.remarks,r=n.node_level||0,t().createElement("td",{key:i,className:"level-".concat(r)},t().createElement(_e,{name:e,value:i,disabled:this.props.disabled,checked:this.props.selected,tabIndex:"-1",onChange:this.props.on_select_checkbox_checked}),o&&t().createElement("a",{uid:i,href:"#",className:"remarks",onClick:this.on_remarks_expand_click},t().createElement("span",{className:"remarksicon fas fa-comment-alt"})))}},{key:"create_regular_cell",value:function(e,n){var r,o,i,s,a,c;return s=this.get_item(),o=this.get_column(e),r=this.get_colspan(e,s),a=this.get_rowspan(e,s),c=this.get_tab_index(e,s),i="contentcell ".concat(e),t().createElement(Gt,vn({},this.props,{key:n,item:s,column_key:e,column_index:n,column:o,colspan:r,rowspan:a,className:i,tabIndex:c}))}},{key:"create_transposed_cell",value:function(e,n){var r,o,i,s,a,c;return s=this.get_item(),o=this.get_column(e),r=this.get_colspan(e,s),a=this.get_rowspan(e,s),c=this.get_tab_index(e,s),i="contentcell ".concat(e),t().createElement(bn,vn({},this.props,{key:n,item:s,column_key:e,column_index:n,column:o,colspan:r,rowspan:a,on_remarks_expand_click:this.on_remarks_expand_click,className:i,tabIndex:c}))}},{key:"build_cells",value:function(){var e,t,n,r,o,i;for(e=[],this.show_select()&&e.push(this.create_select_cell()),t=r=0,o=(i=this.props.visible_columns).length;r<o;t=++r)n=i[t],this.skip_cell_rendering(n)||(this.is_transposed(n)?e.push(this.create_transposed_cell(n,t)):e.push(this.create_regular_cell(n,t)));return e}},{key:"render",value:function(){return this.build_cells()}}])&&kn(n.prototype,r),a}(t().Component);function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return(Nn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cn(e,t){return!t||"object"!==Rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Dn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nn(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Tn(o);if(i){var n=Tn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Cn(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,e)}return n=a,(r=[{key:"render",value:function(){return t().createElement("tr",{className:this.props.className,onClick:this.props.onClick,category:this.props.category,uid:this.props.uid},t().createElement(jn,this.props))}}])&&Pn(n.prototype,r),a}(t().Component);function In(e){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zn(e,t){return!t||"object"!==In(t)&&"function"!=typeof t?Ln(e):t}function Ln(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mn(e){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Mn(o);if(i){var n=Mn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return zn(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_category_click=t.on_category_click.bind(Ln(t)),t}return n=a,(r=[{key:"on_category_click",value:function(e){var t;if(t=e.currentTarget.getAttribute("category"),this.props.on_category_click)return this.props.on_category_click(t)}},{key:"build_category",value:function(){var e,n;return e="collapsed",n="fas fa-caret-square-up",this.props.expanded&&(e="expanded",n="fas fa-caret-square-down"),t().createElement("td",{key:"toggle",className:e,colSpan:this.props.columns_count},t().createElement("span",{className:n})," ",this.props.category)}},{key:"render",value:function(){return t().createElement("tr",{category:this.props.category,onClick:this.on_category_click,className:this.props.className},this.build_category())}}])&&qn(n.prototype,r),a}(t().Component);function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fn(e,t){return!t||"object"!==Hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jn(e){return(Jn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const Zn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Jn(o);if(i){var n=Jn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Fn(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,e)}return n=a,(r=[{key:"render",value:function(){return t().createElement("tr",{className:this.props.className},t().createElement("td",{style:{padding:0,borderTop:0}}),t().createElement("td",{style:{padding:0,borderTop:0},colSpan:this.props.colspan-1},t().createElement(un,this.props)))}}])&&Un(n.prototype,r),a}(t().Component);function Qn(e){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(){return($n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wn(e,t){return(Wn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yn(e,t){return!t||"object"!==Qn(t)&&"function"!=typeof t?Xn(e):t}function Xn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var er=[].indexOf;const tr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wn(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=Gn(o);if(i){var n=Gn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return Yn(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_row_expand_click=t.on_row_expand_click.bind(Xn(t)),t}return n=a,(r=[{key:"on_row_expand_click",value:function(e){var t,n,r;if(t=(n=e.currentTarget).children.item(0),e.target===t&&(r=n.getAttribute("uid"),this.props.on_row_expand_click))return this.props.on_row_expand_click(r)}},{key:"is_selected",value:function(e){var t,n;return n=e.uid,t=this.props.selected_uids||[],er.call(t,n)>=0}},{key:"is_expanded",value:function(e){var t,n;return t=this.props.expanded_rows||[],n=e.uid,er.call(t,n)>=0}},{key:"get_children",value:function(e){var t;return t=e.uid,(this.props.children||{})[t]||[]}},{key:"is_category_expanded",value:function(e){return er.call(this.props.expanded_categories,e)>=0}},{key:"is_item_disabled",value:function(e){return e.disabled||!1}},{key:"is_child_item",value:function(e){if(e.parent)return!0}},{key:"get_item_category",value:function(e){return e.category||null}},{key:"get_item_children",value:function(e){return e.children||[]}},{key:"has_item_children",value:function(e){return this.get_item_children(e).length>0}},{key:"get_remarks_columns",value:function(e){var t,n,r;for(n in t=[],r=this.props.columns)if("remarks"===r[n].type){if(void 0===e[n])continue;t.push(n)}return t}},{key:"get_item_uid",value:function(e){return e.uid}},{key:"get_item_css",value:function(e){var t;return t=["contentrow"],e.state_class&&(t=t.concat(e.state_class.split(" "))),this.is_selected(e)&&t.push("table-info"),this.is_child_item(e)?t.push("child"):t.push("parent"),this.has_item_children(e)&&(this.is_expanded(e)?t.push("expanded"):t.push("collapsed")),t.join(" ")}},{key:"render_categorized_rows",value:function(){var e,n,r,o,i,s;if(s=[],this.props.show_categories)for(r=0,o=(i=this.props.categories).length;r<o;r++)e=i[r],n=this.is_category_expanded(e),s.push(t().createElement(Vn,$n({},this.props,{key:e,category:e,expanded:n,className:"categoryrow"}))),s=s.concat(this.build_rows({props:{category:e}}));else s=this.build_rows();return s}},{key:"build_rows",value:function(){var e,n,r,o,i,s,a,c,u,l,f,p,_,h,d,y,m,b,g,v,k,w,O,E,S=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},x=S.props;for(g=[],null==x&&(x={}),e=x.category||null,h=p=0,y=(f=x.folderitems||this.props.folderitems).length;p<y;h=++p)if(_=f[h],(!e||this.get_item_category(_)===e)&&(!e||this.is_category_expanded(e)||this.is_selected(_))){for(O=this.get_item_uid(_),a=this.get_item_css(_),r=this.get_item_children(_),l=this.is_expanded(_),v=this.is_selected(_),c=this.is_item_disabled(_),u=this.has_item_children(_),b=this.get_remarks_columns(_),w=!1,null===O&&(w=!0,O=h),g.push(t().createElement(Dn,$n({},this.props,{key:O,item:_,uid:O,category:e,expanded:l,remarks:b.length>0,selected:v,disabled:c,className:a,onClick:u&&this.on_row_expand_click||void 0,row_index:h}))),i=d=0,m=b.length;d<m&&(s=b[i],!w);i=++d)this.props.columns[s],k=_.skip||[],o=this.props.columns_count-k.length,E=_[s]||"",g.push(t().createElement(Zn,$n({},this.props,{key:"remarks_"+h,uid:O,item:_,column_key:s,value:E,expanded:l,selected:v,disabled:c,className:a+" remarksrow",colspan:o,row_index:h})));l&&(r=this.get_children(_)).length>0&&(n=this.build_rows({props:{category:e,folderitems:r}}),g=g.concat(n))}return g}},{key:"render",value:function(){return this.render_categorized_rows()}}])&&Kn(n.prototype,r),a}(t().Component);function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function or(e,t){return(or=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ir(e,t){return!t||"object"!==nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sr(e){return(sr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const ar=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&or(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=sr(o);if(i){var n=sr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return ir(this,e)});function a(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),s.call(this,e)}return n=a,(r=[{key:"render",value:function(){return t().createElement("table",{id:this.props.id,className:this.props.className},t().createElement("thead",null,t().createElement(Re,this.props)),t().createElement("tbody",null,t().createElement(tr,this.props)))}}])&&rr(n.prototype,r),a}(t().Component);function cr(e){return(cr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function fr(e,t){return!t||"object"!==cr(t)&&"function"!=typeof t?pr(e):t}function pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _r(e){return(_r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}const hr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=_r(o);if(i){var n=_r(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return fr(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).on_drag_start=t.on_drag_start.bind(pr(t)),t.on_drag_end=t.on_drag_end.bind(pr(t)),t.on_drag_over=t.on_drag_over.bind(pr(t)),t.on_column_toggle_click=t.on_column_toggle_click.bind(pr(t)),t.on_reset_click=t.on_reset_click.bind(pr(t)),t.state={columns_order:t.props.columns_order},t}return n=a,(r=[{key:"componentDidUpdate",value:function(e,t,n){if(this.props.columns_order!==e.columns_order)return this.setState({columns_order:this.props.columns_order})}},{key:"on_reset_click",value:function(e){if(e.preventDefault(),this.props.on_column_toggle_click)return this.props.on_column_toggle_click("reset")}},{key:"on_drag_start",value:function(e){return this.dragged_item=e.currentTarget,e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/html",this.dragged_item),e.dataTransfer.setDragImage(this.dragged_item,50,0)}},{key:"on_drag_over",value:function(e){var t,n,r,o,i;if((i=e.currentTarget)!==this.dragged_item)return t=this.dragged_item.getAttribute("column"),n=i.getAttribute("column"),o=(r=this.state.columns_order).indexOf(n),(r=r.filter((function(e){return e!==t}))).splice(o,0,t),this.setState({columns_order:r})}},{key:"on_drag_end",value:function(e){if(this.dragged_item=null,this.props.on_columns_order_change)return this.props.on_columns_order_change(this.state.columns_order)}},{key:"on_column_toggle_click",value:function(e){var t;if(e.preventDefault(),t=e.currentTarget.getAttribute("column"),this.props.on_column_toggle_click)return this.props.on_column_toggle_click(t)}},{key:"is_column_visible",value:function(e){return!1!==e.toggle}},{key:"build_column_toggles",value:function(){var e,n,r,o,i,s,a;for(n=[],r=0,i=(s=this.state.columns_order).length;r<i;r++)o=s[r],e=this.props.columns[o],a=this.is_column_visible(e),n.push(t().createElement("li",{key:o,column:o,style:{padding:"0 5px 5px 0"},className:"column",onDragOver:this.on_drag_over},t().createElement("a",{href:"#",column:o,className:"draggable-column",onDragStart:this.on_drag_start,onDragEnd:this.on_drag_end,draggable:!0},t().createElement("span",{column:o,onClick:this.on_column_toggle_click,className:"nav-item btn btn-light btn-sm"},a&&t().createElement("i",{className:"text-primary fas fa-check-square"}),!a&&t().createElement("i",{className:"text-muted fas fa-square"}),"Â ",t().createElement("span",{dangerouslySetInnerHTML:{__html:e.title||o}})))));return n}},{key:"render",value:function(){return t().createElement("div",{id:this.props.id,className:this.props.className},t().createElement("div",{className:"row"},t().createElement("div",{className:"col-sm-12 text-left my-3"},t().createElement("strong",null,this.props.title),t().createElement("div",{className:"help-block"},this.props.description),t().createElement("ul",{className:"list-inline nav nav-pills"},this.build_column_toggles(),t().createElement("li",{key:"reset",style:{padding:"0 5px 5px 0"}},t().createElement("button",{onClick:this.on_reset_click,className:"btn btn-warning btn-sm"},_t("Reset Columns")))))))}}])&&ur(n.prototype,r),a}(t().Component);function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function yr(e){return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t){return(br=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gr(e,t){return!t||"object"!==yr(t)&&"function"!=typeof t?vr(e):t}function vr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kr(e){return(kr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var wr,Or=[].indexOf;document.addEventListener("DOMContentLoaded",(function(){var e,n,r,i,s,a,c;for(null==window._t&&(window._t=function(e){return e}),c=document.getElementsByClassName("ajax-contents-table"),null==window.listings&&(window.listings={}),s=[],r=0,i=c.length;r<i;r++)n=(a=c[r]).dataset.form_id,e=o().render(t().createElement(wr,{root_el:a}),a),s.push(window.listings[n]=e);return s})),wr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&br(e,t)}(a,e);var n,r,o,i,s=(o=a,i=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=kr(o);if(i){var n=kr(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return gr(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=s.call(this,e)).dismissMessage=t.dismissMessage.bind(vr(t)),t.doAction=t.doAction.bind(vr(t)),t.filterBySearchterm=t.filterBySearchterm.bind(vr(t)),t.filterByState=t.filterByState.bind(vr(t)),t.on_api_error=t.on_api_error.bind(vr(t)),t.on_column_config_click=t.on_column_config_click.bind(vr(t)),t.on_select_checkbox_checked=t.on_select_checkbox_checked.bind(vr(t)),t.on_reload=t.on_reload.bind(vr(t)),t.saveAjaxQueue=t.saveAjaxQueue.bind(vr(t)),t.saveEditableField=t.saveEditableField.bind(vr(t)),t.setColumnsOrder=t.setColumnsOrder.bind(vr(t)),t.showMore=t.showMore.bind(vr(t)),t.export=t.export.bind(vr(t)),t.sortBy=t.sortBy.bind(vr(t)),t.toggleCategory=t.toggleCategory.bind(vr(t)),t.toggleColumn=t.toggleColumn.bind(vr(t)),t.toggleRemarks=t.toggleRemarks.bind(vr(t)),t.toggleRow=t.toggleRow.bind(vr(t)),t.updateEditableField=t.updateEditableField.bind(vr(t)),t.on_popstate=t.on_popstate.bind(vr(t)),t.root_el=t.props.root_el,t.api_url=t.root_el.dataset.api_url,t.columns=JSON.parse(t.root_el.dataset.columns),t.form_id=t.root_el.dataset.form_id,t.listing_identifier=t.root_el.dataset.listing_identifier,t.pagesize=parseInt(t.root_el.dataset.pagesize),t.review_states=JSON.parse(t.root_el.dataset.review_states),t.show_column_toggles=JSON.parse(t.root_el.dataset.show_column_toggles),t.root_el.addEventListener("reload",t.on_reload),t.api=new C({api_url:t.api_url,on_api_error:t.on_api_error,form_id:t.form_id}),t.filter=t.api.get_url_parameter("filter"),t.pagesize=parseInt(t.api.get_url_parameter("pagesize"))||t.pagesize,t.sort_on=t.api.get_url_parameter("sort_on"),t.sort_order=t.api.get_url_parameter("sort_order"),t.review_state=t.api.get_url_parameter("review_state")||"default",t.state={messages:[],loading:!0,show_column_config:!1,filter:t.filter,pagesize:t.pagesize,sort_on:t.sort_on,sort_order:t.sort_order,review_state:t.review_state,query_string:"",api_url:"",form_id:t.form_id,columns:t.get_default_columns(),review_states:t.review_states,folderitems:[],children:{},categories:[],expanded_categories:[],expanded_rows:[],expanded_remarks:[],total:0,selected_uids:[],transitions:[],catalog_indexes:[],catalog_columns:[],sortable_columns:[],ajax_save_queue:{},content_filter:{},allow_edit:!1,show_select_all_checkbox:!1,show_select_column:!1,show_column_toggles:t.show_column_toggles,select_checkbox_name:"uids",post_action:"workflow_action",show_categories:!1,expand_all_categories:!1,show_more:!1,limit_from:0,show_search:!1,show_ajax_save:!1,show_table_footer:!1,fetch_transitions_on_select:!0,show_export:!0},t}return n=a,(r=[{key:"dismissMessage",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.setState({messages:[]}):((e=[].concat(this.state.messages)).splice(t,1),this.setState({messages:e})),!0}},{key:"addMessage",value:function(e,t,n){var r,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"info";return"object"===yr(e)&&(e=(o=Object.assign(e)).title,t=o.text,n=o.traceback,i=o.level),(r=[].concat(this.state.messages)).push({title:e,text:t,traceback:n,level:i}),this.setState({messages:r}),!0}},{key:"getRequestOptions",value:function(){return{review_state:this.state.review_state,filter:this.state.filter,sort_on:this.state.sort_on,sort_order:this.state.sort_order,pagesize:this.state.pagesize,limit_from:this.state.limit_from,selected_uids:this.state.selected_uids}}},{key:"componentDidMount",value:function(){return window.addEventListener("popstate",this.on_popstate,!1),this.fetch_folderitems()}},{key:"componentWillUnmount",value:function(){return window.removeEventListener("popstate",this.on_popstate,!1)}},{key:"componentDidUpdate",value:function(e,t,n){}},{key:"toggleCategory",value:function(e){var t,n;return(n=(t=this.state.expanded_categories).indexOf(e))>-1?t.splice(n,1):t.push(e),this.setState({expanded_categories:t}),t.length>0}},{key:"toggleRemarks",value:function(e){var t,n;return!!e&&((n=(t=this.state.expanded_remarks).indexOf(e))>-1?t.splice(n,1):t.push(e),this.setState({expanded_remarks:t}),t.length>0)}},{key:"toggleRow",value:function(e){var t,n,r;return!!e&&((n=(t=this.state.expanded_rows).indexOf(e))>-1?t.splice(n,1):t.push(e),r=this,e in this.state.children?this.setState({expanded_rows:t}):this.fetch_children({parent_uid:e}).then((function(n){var o,i,s,a,c;for(i=r.state.children,a=n.children||[],i[e]=a,s=0,c=a.length;s<c;s++)(o=a[s]).selected&&r.selectUID(o.uid,!0);return r.setState({children:i,expanded_rows:t})})),t.length>0)}},{key:"toggleColumn",value:function(e){var t,n,r,o;if("reset"===e)return this.setState({columns:this.get_default_columns()}),this.set_local_column_config([]),!0;for(e in void 0===(o=(r=this.state.columns)[e].toggle)&&(o=!0),r[e].toggle=!o,n=[],r)t=r[e],n.push({key:e,toggle:t.toggle});return this.set_local_column_config(n),this.setState({columns:r}),o}},{key:"setColumnsOrder",value:function(e){var t,n,r,o,i,s,a,c;for(a={},n=[],(i=Object.keys(this.state.columns)).sort((function(t,n){return e.indexOf(t)-e.indexOf(n)})),r=0,s=i.length;r<s;r++)o=i[r],void 0===(c=(t=this.state.columns[o]).toggle)&&(c=!0),n.push({key:o,toggle:c}),a[o]=t;return this.set_local_column_config(n),this.setState({columns:a}),a}},{key:"get_visible_columns",value:function(){var e,t,n,r,o,i,s;for(r=[],e=this.get_allowed_column_keys(),s=this.get_columns_visibility(),t=0,o=(i=this.get_columns_order()).length;t<o;t++)n=i[t],Or.call(e,n)<0||!1!==s[n]&&r.push(n);return r}},{key:"get_default_columns",value:function(){return JSON.parse(this.root_el.dataset.columns)}},{key:"get_columns",value:function(){var e,t,n,r,o,i,s,a;for(t={},a=this.get_columns_visibility(),n=0,o=(i=this.get_columns_order()).length;n<o;n++)r=i[n],void 0!==(e=this.state.columns[r])&&(void 0!==(s=a[r])&&(e.toggle=s),t[r]=e);return t}},{key:"get_columns_keys",value:function(){return Object.keys(this.state.columns)}},{key:"get_columns_order",value:function(){var e,t,n;return t=this.get_columns_keys(),n=(n=this.get_local_column_config()).filter((function(e){return-1!==t.indexOf(e.key)})),this.state.show_column_toggles&&n.length>0?n.map((function(e,t){return e.key})):(e=this.get_allowed_column_keys()).concat(t.filter((function(t){return-1===e.indexOf(t)})))}},{key:"get_columns_visibility",value:function(){var e,t,n,r,o,i,s;if(s={},r=this.get_local_column_config(),this.state.show_column_toggles&&r.length>0)for(e=0,n=r.length;e<n;e++){var a=r[e];t=a.key,void 0===(i=a.toggle)&&(i=!0),s[t]=i}else for(t in o=this.state.columns)void 0===(i=o[t].toggle)&&(i=!0),s[t]=i;return s}},{key:"filterByState",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return e=this.get_review_state_by_id(t).listing_config||{},this.set_state(Object.assign({review_state:t,pagesize:this.pagesize,limit_from:0},e)),!0}},{key:"filterBySearchterm",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.set_state({filter:e,pagesize:this.pagesize,limit_from:0}),!0}},{key:"sortBy",value:function(e,t){return this.set_state({sort_on:e,sort_order:t,pagesize:this.get_item_count(),limit_from:0}),!0}},{key:"showMore",value:function(e){var t,n;return t=this.state.folderitems,n=this,this.setState({pagesize:parseInt(e),limit_from:this.state.folderitems.length,loading:!0},(function(){return n.api.fetch_folderitems(n.getRequestOptions()).then((function(e){var r;if(n.toggle_loader(!1),e.folderitems.length>0)return r=t.concat(e.folderitems),n.setState({folderitems:r})}))})),!0}},{key:"export",value:function(){var e,t,n,r,o,i,s,a,c,u;return n=this.get_columns_order(),r=this.get_columns_visibility(),n=function(){var t,o,i;for(i=[],t=0,o=n.length;t<o;t++)e=n[t],!0===r[e]&&i.push(e);return i}(),t=this.get_columns(),s=function(){var e,r,o;for(o=[],e=0,r=n.length;e<r;e++)c=n[e],o.push(JSON.stringify(t[c].title||c));return o}(),i=this.state.folderitems,u=function(){var e,t,r;for(r=[],e=0,t=i.length;e<t;e++)a=i[e],r.push(this.to_csv_row(a,n));return r}.call(this),o=(o=s.join(","))+"\n"+u.join("\n"),this.download_csv(o,"download.csv")}},{key:"download_csv",value:function(e,t){var n,r;return n=new Blob(["\ufeff",e],{encoding:"UTF-8",type:"text/csv;charset=UTF-8"}),(r=document.createElement("a")).download=t,r.href=window.URL.createObjectURL(n),r.display="none",document.body.appendChild(r),r.click()}},{key:"to_csv_row",value:function(e,t){var n,r,o,i,s,a,c,u;for(o=[],c=0,u=t.length;c<u;c++)a=t[c],r=e[a]||"","Result"===a?r=e.formatted_result||r:r.constructor===Object&&(r=r.formatted_value||r.value),null!=e.choices&&null!=(s=e.choices[a])&&(i=function(){var e,t,o;for(o=[],e=0,t=s.length;e<t;e++)(n=s[e]).ResultValue===r&&o.push(n.ResultText);return o}(),r=i[0]||r),r=JSON.stringify(r),o.push(r);return o.join(",")}},{key:"doAction",value:function(e,t){var n,r,o;if("clear_selection"!==e)return r=document.getElementById(this.state.form_id),n=e.split("_transition")[0],(o=document.createElement("input")).setAttribute("type","hidden"),o.setAttribute("id",e),o.setAttribute("name","workflow_action_id"),o.setAttribute("value",n),r.appendChild(o),t&&(r.action=t),r.submit();this.selectUID("all",!1)}},{key:"selectUID",value:function(e,t){var n,r,o,i,s,a,c,u,l=this;if(u=[].concat(this.state.selected_uids),!0===t)if("all"===e)for(i=0,s=(r=this.state.folderitems.filter((function(e){return!e.disabled})).map((function(e){return e.uid}))).length;i<s;i++)e=r[i],Or.call(u,e)<0&&u.push(e);else Or.call(u,e)<0&&u.push(e);else"all"===e?(o=this.group_by_uid(this.state.folderitems),u=u.filter((function(e){return o[e].readonly}))):(a=u.indexOf(e),u.splice(a,1));if(n=u.filter((function(e){return-1===l.state.selected_uids.indexOf(e)})).length>0,c=this.state.selected_uids.filter((function(e){return-1===u.indexOf(e)})).length>0,n||c)return new Promise((function(e,t){return l.setState({selected_uids:u},e)}))}},{key:"saveAjaxQueue",value:function(){return Object.keys(this.state.ajax_save_queue).length>0&&this.ajax_save()}},{key:"saveEditableField",value:function(e,t,n,r){var o,i,s;return!(Or.call(r.allow_edit,t)<0||((i=this.state.columns[t]||{}).ajax&&(s=this,null==(o=this.state.ajax_save_queue)[e]&&(o[e]={}),o[e][t]=n,this.setState({show_ajax_save:!0,ajax_save_queue:o},(function(){if(i.autosave)return s.ajax_save()}))),0))}},{key:"updateEditableField",value:function(e,t,n,r){var o;return this.saveEditableField(e,t,n,r),o=this,this.is_uid_selected(e)||(o=this,this.selectUID(e,!0).then((function(){if(o.state.fetch_transitions_on_select)return o.fetch_transitions()}))),!0}},{key:"is_uid_selected",value:function(e){return Or.call(this.state.selected_uids,e)>=0}},{key:"get_review_state_by_id",value:function(e){var t,n,r,o,i;for(t=null,n=0,r=(o=this.state.review_states).length;n<r;n++)if((i=o[n]).id===e){t=i;break}return t||{id:"default",columns:this.get_columns_keys()}}},{key:"get_allowed_column_keys",value:function(){var e,t,n;return n=this.state.review_state,(t=this.get_review_state_by_id(n).columns)||Object.keys(this.state.columns),e=this.state.columns,t.filter((function(t){return void 0!==e[t]}))}},{key:"get_local_storage_key",value:function(e,t){var n;return n=this.listing_identifier,void 0===this.listing_identifier&&(n=location.pathname),void 0!==e&&(n=e+n),void 0!==t&&(n+=t),n}},{key:"set_local_column_config",value:function(e){var t;return t=this.get_local_storage_key("columns-"),window.localStorage.setItem(t,JSON.stringify(e)),!0}},{key:"get_local_column_config",value:function(){var e,t;if(t=this.get_local_storage_key("columns-"),!(e=window.localStorage.getItem(t)))return[];try{return JSON.parse(e)}catch(e){return[]}}},{key:"get_columns_count",value:function(){var e;return e=this.get_visible_columns().length,this.state.show_select_column&&(e+=1),e}},{key:"get_expanded_categories",value:function(){return this.state.expand_all_categories||this.state.filter?[].concat(this.state.categories):[]}},{key:"group_by_uid",value:function(e){var t;return null==e&&(e=this.state.folderitems),t={},e.map((function(e,n){var r;return r=e.uid||e.column_key||n,t[r]=e})),t}},{key:"get_item_count",value:function(){return this.state.folderitems.length}},{key:"toggle_loader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.setState({loading:e}),e}},{key:"set_state",value:function(e){var t,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t=this,this.setState(e,(function(){if(n)return t.fetch_folderitems()})),!0}},{key:"fetch_transitions",value:function(){var e,t,n;if(0!==this.state.selected_uids.length)return this.toggle_loader(!0),t=this.getRequestOptions(),this.update_location_hash(t),n=this.api.fetch_transitions(t),e=this,n.then((function(t){return e.setState(t,(function(){return e.toggle_loader(!1)}))})),n;this.setState({transitions:[]})}},{key:"fetch_folderitems",value:function(){var e,t,n;return this.toggle_loader(!0),t=this.getRequestOptions(),this.update_location_hash(t),n=this.api.fetch_folderitems(t),e=this,n.then((function(t){var n,r,o,i,s,a,c,u,l;for(r=e.group_by_uid(e.state.folderitems),c=e.group_by_uid(t.folderitems),a=t.categories||[],i=0,s=(u=e.state.selected_uids).length;i<s;i++)if(!((l=u[i])in c)){if(!(o=r[l]))continue;c[l]=r[l],(n=o.category)&&Or.call(a,n)<0&&(a.push(n),a.sort())}return t.categories=a,t.folderitems=Object.values(c),e.setState(t,(function(){return e.setState({expanded_categories:e.get_expanded_categories()},(function(){})),e.toggle_loader(!1)}))})),n}},{key:"fetch_children",value:function(){var e,t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=r.parent_uid,i=r.child_uids;return this.toggle_loader(!0),i||(i=[],o in(e=this.group_by_uid())&&(i=e[o].children||[])),n=this.api.fetch_children({parent_uid:o,child_uids:i}),t=this,n.then((function(e){return t.toggle_loader(!1)})),n}},{key:"render_toolbar_top",value:function(){return!!this.state.show_more||!!this.state.show_search||this.state.review_states.length>1}},{key:"ajax_save",value:function(){var e,t;return this.toggle_loader(!0),t=this.api.set_fields({save_queue:this.state.ajax_save_queue}),e=this,t.then((function(t){var n;return(t.uids||[]).map((function(t,n){return e.selectUID(t,!0)})),n=t.folderitems||[],e.update_existing_folderitems_with(n),e.state.fetch_transitions_on_select&&e.fetch_transitions(),e.setState({show_ajax_save:!1,ajax_save_queue:{}}),e.toggle_loader(!1)})),t}},{key:"update_existing_folderitems_with",value:function(e){var t,n,r,o,i,s,a,c;for(a in o=[],c=this.group_by_uid(e),t=this.group_by_uid(this.state.folderitems))if(n=t[a],s=Object.assign({},n),a in c){for(r in i=Object.assign({},c[a]),s)s[r],"rowspan"!==r&&"colspan"!==r&&"skip"!==r||(i[r]=s[r]),i.hasOwnProperty(r)||(i[r]=s[r]);o.push(i)}else o.push(s);return this.setState({folderitems:o})}},{key:"update_location_hash",value:function(e){var t,n,r,o,i,s;for(r in null==e&&(e={}),i=[],t=["filter","pagesize","review_state","sort_on","sort_order"],e)s=e[r],-1!==t.indexOf(r)&&(o=this.api.to_form_name(r),i=i.concat("".concat(o,"=").concat(s)));return n=i.join("&"),location.hash="#?".concat(n)}},{key:"on_column_config_click",value:function(e){var t;if(e.preventDefault(),this.state.show_column_toggles)return t=!this.state.show_column_config,this.setState({show_column_config:t})}},{key:"on_select_checkbox_checked",value:function(e){var t,n,r,o;return r=this,o=(n=e.currentTarget).value,t=n.checked,this.selectUID(o,t).then((function(){if(r.state.fetch_transitions_on_select)return r.fetch_transitions()}))}},{key:"on_api_error",value:function(e){var t=this;return this.toggle_loader(!1),e.text().then((function(n){var r,o;return o=_t("Oops, an error occured! ðŸ™ˆ"),r=_t("The server responded with the status ".concat(e.status,": ").concat(e.statusText)),t.addMessage(o,r,null,"danger")})),e}},{key:"on_reload",value:function(e){return this.fetch_folderitems()}},{key:"on_popstate",value:function(e){var t,n,r,o,i,s,a,c;for(t in o=this.api.parse_hash(location.hash)){var u=(a=o[t].split("="),c=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],r=!0,o=!1,i=void 0;try{for(var s,a=e[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}}(a,c)||function(e,t){if(e){if("string"==typeof e)return dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dr(e,t):void 0}}(a,c)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}());n=u[0],s=u[1],n.startsWith(this.form_id)&&(r=n.replace("".concat(this.form_id,"_"),""))in this.state&&("pagesize"===r&&(s=parseInt(s)),s!==this.state[r]&&(this.state[r]=s,i=!0))}if(i)return this.fetch_folderitems()}},{key:"render",value:function(){var e,n,r,o,i,s;return e=this.get_columns(),r=this.get_columns_order(),n=this.get_columns_count(),s=this.get_visible_columns(),o=this.get_item_count(),i=this.render_toolbar_top(),t().createElement("div",{className:"listing-container"},t().createElement(J,{on_dismiss_message:this.dismissMessage,id:"messages",className:"messages",messages:this.state.messages}),this.state.loading&&t().createElement("div",{id:"table-overlay"}),!i&&this.state.loading&&t().createElement(L,{loading:this.state.loading}),i&&t().createElement("div",{className:"row top-toolbar"},t().createElement("div",{className:"col-sm-8"},t().createElement(P,{className:"filterbar nav nav-pills",on_filter_button_clicked:this.filterByState,review_state:this.state.review_state,review_states:this.state.review_states})),t().createElement("div",{className:"col-sm-1 text-right"},t().createElement(L,{loading:this.state.loading})),t().createElement("div",{className:"col-sm-3 text-right"},t().createElement(ie,{show_search:this.state.show_search,on_search:this.filterBySearchterm,filter:this.state.filter,placeholder:_t("Search")}))),t().createElement("div",{className:"row"},t().createElement("div",{className:"col-sm-12 table-responsive"},this.state.show_column_toggles&&t().createElement("a",{href:"#",onClick:this.on_column_config_click,className:"pull-right"},t().createElement("i",{className:"fas fa-ellipsis-h"})),this.state.show_column_config&&t().createElement(hr,{title:_t("Configure Table Columns"),description:_t("Click to toggle the visibility or drag&drop to change the order"),columns:e,columns_order:r,on_column_toggle_click:this.toggleColumn,on_columns_order_change:this.setColumnsOrder}),t().createElement(ar,{className:"contentstable table table-condensed table-hover small",allow_edit:this.state.allow_edit,on_header_column_click:this.sortBy,on_select_checkbox_checked:this.on_select_checkbox_checked,on_context_menu:this.on_column_config_click,sort_on:this.state.sort_on,sort_order:this.state.sort_order,catalog_indexes:this.state.catalog_indexes,catalog_columns:this.state.catalog_columns,sortable_columns:this.state.sortable_columns,columns:e,columns_count:n,review_state:this.state.review_state,visible_columns:s,review_states:this.state.review_states,folderitems:this.state.folderitems,children:this.state.children,selected_uids:this.state.selected_uids,select_checkbox_name:this.state.select_checkbox_name,show_select_column:this.state.show_select_column,show_select_all_checkbox:this.state.show_select_all_checkbox,categories:this.state.categories,expanded_categories:this.state.expanded_categories,expanded_rows:this.state.expanded_rows,expanded_remarks:this.state.expanded_remarks,show_categories:this.state.show_categories,on_category_click:this.toggleCategory,on_row_expand_click:this.toggleRow,on_remarks_expand_click:this.toggleRemarks,filter:this.state.filter,update_editable_field:this.updateEditableField,save_editable_field:this.saveEditableField}))),this.state.show_table_footer&&t().createElement("div",{className:"row"},t().createElement("div",{className:"col-sm-8"},t().createElement(w,{className:"buttonbar nav nav-pills",show_ajax_save:this.state.show_ajax_save,ajax_save_button_title:_t("Save"),on_transition_button_click:this.doAction,on_ajax_save_button_click:this.saveAjaxQueue,selected_uids:this.state.selected_uids,show_select_column:this.state.show_select_column,transitions:this.state.transitions,review_state:this.get_review_state_by_id(this.state.review_state)})),t().createElement("div",{className:"col-sm-1 text-right"},t().createElement(L,{loading:this.state.loading})),t().createElement("div",{className:"col-sm-3 text-right"},t().createElement(X,{id:"pagination",className:"pagination-controls",total:this.state.total,show_more_button_title:_t("Show more"),onShowMore:this.showMore,show_more:this.state.show_more,count:o,pagesize:this.state.pagesize,export_button_title:_t("Export"),show_export:this.state.show_export,onExport:this.export}))))}}])&&mr(n.prototype,r),a}(t().Component)})()})();